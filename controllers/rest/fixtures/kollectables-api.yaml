openapi: 3.0.3
info:
  title: Kollectables Application
  description: Kollectables Application
  version: 1.0.0
servers:
  - url: "https://kollectables.io"
    description: Production endpoint
  - url: "https://staging.kollectables.io"
    description: Staging environment
  - url: "http://localhost:8681"
    description: Local Development environment
x-weos-config:
  database:
    driver: sqlite3
    database: kollectables.db
  rest:
    middleware:
      - RequestID
      - Recover
      - ZapLogger
security:
  - OpenID: []
components:
  securitySchemes:
    OpenID:
      type: openIdConnect
      openIdConnectUrl: https://dev-bhjqt6zc.us.auth0.com/.well-known/openid-configuration
  schemas:
    Profile:
      type: object
      properties:
        id:
          type: string
        username:
          type: string
        twitchId:
          type: string
        firstName:
          type: string
        lastName:
          type: string
        email:
          type: string
          format: email
        image:
          type: string
        lastUpdated:
          type: string
          format: date-time
        created:
          type: string
          format: date-time
      required:
        - email
      x-identifier:
        - id
paths:
  /profile:
    post:
      operationId: Create Profile
      security: []
      requestBody:
        description: Create a profile
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Profile"
      responses:
        201:
          description: Created a Profile
        400:
          description: Bad Request
        401:
          description: User is not authenticated
  /profile/{id}:
    get:
      parameters:
        - in: path
          name: id
          schema:
            type: integer
          required: true
          description: profile id
      operationId: Get User Profile
      summary: Get a user profile
      responses:
        200:
          description: User Profile
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Profile"
        400:
          description: Bad Request
        401:
          description: User is not authenticated
        403:
          description: User is authenticated but is not authorized to access this profile
  /home:
    get:
      operationId: Kollectables Homepage
      responses:
        200:
          description: Homepage
          content:
            # application/json:
            #   schema:
            #     $ref: "#/components/schemas/Account"
            text/html:
              example: |
                <html lang="en">
                  <head>
                    <meta charset="utf-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
                    <!-- bootstrap 4.3.1 -->
                    <link rel="stylesheet" src="./static/css/vendor/bootstrap.min.css">
                    <!-- styles -->
                    <link rel="stylesheet" src="./static/css/styles.min.css">
                    <!-- favicon -->
                    <link rel="icon" src="./static/img/favicon.ico">
                    <title>Kollectables | Home</title>
                  </head>
                  <body>
                    <!-- LANDING -->
                    <div class="landing">
                      <!-- LANDING DECORATION -->
                      <div class="landing-decoration"></div>
                      <!-- /LANDING DECORATION -->
                      <!-- LANDING INFO -->
                      <div class="landing-info">
                        <!-- LOGO -->
                        <div class="logo">
                          <!-- ICON LOGO VIKINGER -->
                            <svg class="icon-logo-vikinger">
                              <use xlink:href="#svg-logo-vikinger"></use>
                            </svg>
                          <!-- /ICON LOGO VIKINGER -->
                        </div>
                        <!-- /LOGO -->
                        <!-- LANDING INFO PRETITLE -->
                        <h2 class="landing-info-pretitle">Welcome to</h2>
                        <!-- /LANDING INFO PRETITLE -->
                        <!-- LANDING INFO TITLE -->
                        <h2 class="landing-info-title">Kollectables</h2>
                        <!-- /LANDING INFO TITLE -->
                        <!-- LANDING INFO TEXT -->
                        <p class="landing-info-text">Rewarding you for being you and being part of the &amp; community! Collect badges
                          from your favourite Streamers!</p>
                        <!-- /LANDING INFO TEXT -->
                        <div style="width:100%;text-align: center;padding-top: 10px;">
                          <a id="login-btn" class="button medium secondary" onclick="login()"
                            style="margin: 10px 10px 10px 10px; padding: 0 10px 0 10px" disabled="true">
                            <!-- ICON TWITCH -->
                            <svg class="icon-twitch">
                              <use xlink:href="#svg-twitch"></use>
                            </svg>
                            Login With Twitch
                            <!-- /ICON TWITCH -->
                          </a>
                        </div>
                      </div>
                      <!-- /LANDING INFO -->
                    </div>
                    <!-- /LANDING -->
                    <!-- app -->
                    <script src="./static/js/utils/app.js"></script>
                    <!-- XM_Plugins -->
                    <script src="./static/js/vendor/xm_plugins.min.js"></script>
                    <!-- form.utils -->
                    <script src="./static/js/form/form.utils.js"></script>
                    <!-- landing.tabs -->
                    <script src="./static/js/landing/landing.tabs.js"></script>
                    <!-- SVG icons -->
                    <script src="./static/js/utils/svg-loader.js"></script>
                    <!-- Auth0 -->
                    <script src="https://cdn.auth0.com/js/auth0-spa-js/1.13/auth0-spa-js.production.js"></script>
                    <script src="./static/js/app.js"></script>
                  </body>
                </html>