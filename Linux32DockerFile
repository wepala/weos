FROM golang:alpine

RUN apk add --no-cache libc6-compat

WORKDIR /app
COPY api.yaml /app/api.yaml
COPY . /app/
RUN go build server.go -o weos
RUN chmod +x /app/weos

EXPOSE 80
ENTRYPOINT [ "/app/weos" ]

CMD ["-port=80"]